<!DOCTYPE html>
<html class="page page--home no-js">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>chayns.js</title>
    <link rel="stylesheet" href="https://chayns1.tobit.com/SlitteRessource/API/v3/css/chayns.css">
    <style type="text/css">

      .loading {
        display: none;
      }

      .loading {
        display: block;
      }

      .chayns-ready .loading {
        display: none;
      }

      .js--no-support {
        display: none;
      }

      .no-js .js--no-support {
        display: block;
      }

      .js-support {
        display: none;
      }
      .js .js-support {
        display: block;
      }

      .dom-status {
        display: none;
      }

      .dom-ready .dom-status {
        display: block;
      }

      .chayns-status {
        display: none;
      }

      .chayns-ready .chayns-status {
        display: block;
      }

      .chayns__upload-image {
        position: absolute;
        top: -100px;
      }

      .toggle {
      }

      .toggle--margin {
        margin-top: 1700px
      }

    </style>
  </head>
  <body chayns-cloak>

    <div class="tapp">
      <div class="tapp__intro">
        <h1 class="headline">chayns.js</h1>

        <div>
          <button class="button" onclick="chayns.dialog.alert('dhello.fx').then(console.debug.bind(console, 'alertResolved'),console.error.bind(console, 'alertRejected'))">Alert</button>
          <button class="button" onclick="chayns.dialog.confirm('dhello.fx').then(console.debug.bind(console, 'confirmResolved'),console.error.bind(console, 'confirmResjected'))">Confirm</button>
        </div>

        <div>
          <button class="button" onclick="chayns.dialog.select({title:'dhello.fx',list:[{name:'test'}, {name:'test2'}]}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">Select</button>
          <button class="button" onclick="chayns.dialog.select({title:'dhello.fx',quickfind:1,list:[{name:'test'}, {name:'test2'}]}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">Select with Quickfind</button>
          <button class="button" onclick="chayns.dialog.select({title:'dhello.fx',list:[{name:'test'}, {name:'selected',isSelected:true}]}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">Select with PreSelection</button>
        </div>
        <div>
          <button class="button" onclick="chayns.dialog.select({title:'dhello.fx',multiselect:1,list:[{name:'test'}, {name:'selectdd',isSelected:true}]}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">Multiselect with PreSelection</button>
          <button class="button" onclick="chayns.dialog.select({title:'dhello.fx',multiselect:1,list:[{name:'test'}, {name:'test2'}]}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">Multiselect</button>
        </div>
        <div>
          <button class="button" onclick="chayns.dialog.facebook({title:'dhello.fx'}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">FB</button>
          <button class="button" onclick="chayns.dialog.facebook({title:'dhello.fx',preSelected:['4462600500641']}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">FB preselected</button>
        </div>
        <div>
          <button class="button" onclick="chayns.dialog.date({dateType: 1, preSelect: Date.now()}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">DateSelect</button>
          <button class="button" onclick="chayns.dialog.date({dateType: 2, preSelect: Date.now()}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">TimeSelect</button>
          <button class="button" onclick="chayns.dialog.date({dateType: 3, preSelect: Date.now()}).then(console.debug.bind(console, 'selectResolved'),console.error.bind(console, 'selectRejected'))">DateTimeSelect</button>
        </div>

        <div>
          <button class="button" onclick="htmlDialog()">HTML Dialog</button>
        </div>

        <div class="loading">
          loading....
        </div>

        <div class="js--support">
          JavaScript is supported!
        </div>
        <div class="js--no-support">
          JavaScript is not supported!
        </div>

        <div class="dom-status">
          The DOM is ready!
        </div>

        <div class="chayns-status">
          Chayns is ready!
        </div>
      </div>

      <div class="tapp__content is-dark chayns-env">
        env loading...
      </div>

      <button class="button" onclick="document.querySelector('.toggle').classList.toggle('toggle--margin')">toggle </button>

      <div class="accordion">
        <div class="accordion__head">List Accordion</div>
        <div class="accordion__body">
          <div class="accordion__content">
            <div class="item">Item #2</div>
            <div class="item">Item #3</div>
            <div class="item">Item #4</div>
            <div class="item">Item #1</div>
            <div class="item">Item #5</div>
            <div class="item">Item #6</div>
            <div class="item">Item #7</div>
            <div class="item">Item #8</div>
            <div class="item">Item #9</div>
          </div>
        </div>
      </div>
      <p data-lang="customer_introText">
        langRes introText
      </p>
      <p data-lang="test">
        langRes test
      </p>
      <p data-lang="test2">
        langRes test not found
      </p>
      <p class="toggle">hope you like scrolling in the deeeeeep</p>

    </div>
    <div class="chayns__root" id="chayns-root"></div>
    <script>

      function htmlDialog() {
        return chayns.dialog.html({
          title: 'Html Dialog',
          message: '<b>HTML</b><br>Dialog<br><marquee>text goes here</marquee>',
          buttons: [
            {
              name: 'OK',
              value: 1
            },
            {
              name: 'About',
              value: 2
            }
          ]
        }).then(console.debug.bind(console, 'htmlDialogResolved'), console.error.bind(console, 'htmlDialogRejected'))
      }
      /**
       * @name preChayns
       * @module window
       *
       * @description
       * global object which contains information about chayns configuration
       * which will be available before any chayns service starts
       * TODO: remove or keep?
       *
       * @type {{}}
       */
        // or call it toChayns
        // the preChayns `Object` can be defined before chayns is loaded
      window.preChayns = {
        debugMode: true, // enables debugMode and sets logging to 4 (debug)
        logLevel: 4 // sets the logLevel. will overwrite debugMode's logLevel
//        dontSetup: true // (be carefully) disables the setup function
      };
    </script>
    <script src="js/chayns.js"></script>
    <script src="dist/chayns.js"></script>
    <script>
      (function() {
        'use strict';


        chayns.showWaitCursor();


        // override config before the chayns.ready
        // chayns.register is more logic and reasonable than a preChayns `Object`
        chayns.register({
          appName: 'Pascals',
          loggerName: 'pw.app', // additional, the appName will be used as default
          debugMode: true
        });

        // chayns logger
        //var log = chayns.getLogger('pw.app');

        // chayns ready promise <3
        chayns.ready.then(function(data) {

          // chayns data
          log.info('chayns app info: ', data);

          // chayns env
          var chaynsEnvElement = chayns.utils.DOM.query('.chayns-env');
          var html = 'Browser: ' + chayns.env.isBrowser + '<br>\n'
                   + 'App:' + chayns.env.isApp + '<br>\n<br>\n'
                   + 'Mobile:' + chayns.env.isMobile + '<br>\n'
                   + 'Desktop: ' + chayns.env.isDesktop + '<br>\n<br>\n'
                   + 'Chayns Web: ' + chayns.env.isChaynsWeb + '<br>\n'
                   + 'Chayns Web Mobile: ' + chayns.env.isChaynsWebMobile + '<br>\n'
                   + 'Chayns Web Desktop: ' + chayns.env.isChaynsWebDesktop + '<br>\n<br>\n'
                   + 'isAndroid: ' + chayns.env.isAndroid + '<br>\n'
                   + 'isIOS: ' + chayns.env.isIOS + '<br>\n<br>\n'
                   + 'canChaynsCalls: ' + chayns.env.canChaynsCall + '<br>\n'
                   + 'canChaynsWebCalls: ' + chayns.env.canChaynsWebCall + '<br>\n<br>\n'
                   + 'isInFrame: ' + chayns.env.isInFrame + '<br>\n'
                   + 'isChaynsParent: ' + chayns.env.isChaynsParent + '<br>\n';
          chayns.utils.DOM.setHTML(chaynsEnvElement, html);

          // just Demo purpose
          setTimeout(chayns.hideWaitCursor, 500);

          // caption Button
          chayns.setCaptionButton('API 3', log.info.bind(log, 'own cb'))
            .then(log.info.bind(log, 'caption button callback'))
            .catch(log.error.bind(log, 'caption button error'));

          // fetch API
//          chayns.utils
//            .get('./test.json')
//            .then(console.debug.bind(console), console.error.bind(console));
//
//          chayns.utils
//            .fetchJSON('./test.json')
//            .then(console.debug.bind(console), console.error.bind(console));

//          chayns.utils
//            .post('./test.json', {test: true})
//            .then(console.debug.bind(console), console.error.bind(console));

          // resize exclusive container
//          parent.dispatchEvent(new Event('resize'));

          // Test player
          // chayns.player.changeUrl('http://ads.radioffn.c.nmdn.net/ps-radioffn/livestream.mp3')
          // chayns.player.play();

        }).catch( function rejected(e) {
          log.warn('Chayns Information could not be received\n', e);

          // still show tapp
          chayns.utils.DOM.removeAttribute(chayns.utils.DOM.query('[chayns-cloak]'), 'chayns-cloak');
        });

        // lang test
        var lang = chayns.utils.lang;
        lang.init({
          projectName: 'tobitShop', // TODO(pascal): should be taken from chayns.register()
          middle: 'LangRes',
          language: 'en', // en is default language
          prefix: 'txt_chayns_', // txt_ is the default prefix
          editMode: true // not yet implemented, but basic idea of allwoing edit? (not good in here)
        }).then(function (originalStringsObject) {
          log.info('lang string are loaded: ', originalStringsObject, lang.get('test'));
          // find and replace all data-lang="txt_mystring" strings
          lang.translateDomStrings();
        });

        log.info('test', lang.get('test'), lang.get(['test', 'customer_introText']));


      })();
    </script>
  </body>
</html>

